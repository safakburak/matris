package test.matris.messagesocket;

import java.net.SocketException;

import matris.messagesocket.Message;
import matris.messagesocket.MessageSocketListener;
import test.matris.messagesocket.MessageSocketTest;

public class MessageSocketTest2 {

	public static void main(String[] args) throws SocketException {
		
		int SOCKET_1 = 1234;
		int SOCKET_2 = 4321;
		
		MessageSocketTest socket1 = new MessageSocketTest(1234);
		MessageSocketTest socket2 = new MessageSocketTest(4321);
		
		socket1.addListener(new MessageSocketListener() {
			
			@Override
			public void onMessage(Message message) {

				System.out.println("Socket 1 received: " + message);
			}
		});
		
		socket2.addListener(new MessageSocketListener() {
			
			@Override
			public void onMessage(Message message) {
				
				System.out.println("Socket 2 received: " + message);
			}
		});
		
		socket1.send(new TestMessage(), "localhost", SOCKET_2);
		socket2.send(new TestMessage(), "localhost", SOCKET_1);
	}
}
